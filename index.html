<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Daily Shopping</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #166088;
            --accent: #4fc3f7;
            --background: #f5f5f5;
            --card: #ffffff;
            --text: #333333;
            --done: #81c784;
            --delete: #e57373;
            --day-button: #e0e0e0;
            --day-button-active: #4a6fa5;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .add-item {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }

        .add-item input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .add-item select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background-color: white;
        }

        .add-item button {
            padding: 12px 16px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }

        .day-section {
            margin-bottom: 10px;
        }

        .day-header {
            padding: 15px;
            background-color: var(--day-button);
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .day-header.active {
            background-color: var(--day-button-active);
            color: white;
            font-weight: bold;
        }

        .day-header .arrow {
            transition: transform 0.3s;
        }

        .day-header.active .arrow {
            transform: rotate(180deg);
        }

        .day-items {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: var(--card);
            border-radius: 0 0 8px 8px;
        }

        .day-items.expanded {
            max-height: 2000px; /* Large enough to accommodate all items */
            transition: max-height 0.5s ease-in;
        }

        .shopping-list {
            list-style: none;
            padding: 0 10px 10px 10px;
        }

        .shopping-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-top: 10px;
            background-color: var(--card);
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .shopping-item.done {
            opacity: 0.7;
            background-color: #f0f0f0;
        }

        .shopping-item .item-text {
            flex: 1;
            margin-left: 10px;
        }

        .shopping-item.done .item-text {
            text-decoration: line-through;
            color: #777;
        }

        .shopping-item .actions {
            display: flex;
            gap: 8px;
        }

        .shopping-item button {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .shopping-item button.done-btn {
            background-color: var(--done);
            color: white;
        }

        .shopping-item button.delete-btn {
            background-color: var(--delete);
            color: white;
        }

        .empty-state {
            text-align: center;
            padding: 20px;
            color: #777;
            font-style: italic;
        }

        @media (max-width: 480px) {
            .add-item {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <h1>Daily Shopping</h1>
    
    <div class="add-item">
        <input type="text" id="itemInput" placeholder="Add an item...">
        <select id="daySelect">
            <option value="Monday">Monday</option>
            <option value="Tuesday">Tuesday</option>
            <option value="Wednesday">Wednesday</option>
            <option value="Thursday">Thursday</option>
            <option value="Friday">Friday</option>
            <option value="Saturday">Saturday</option>
            <option value="Sunday">Sunday</option>
        </select>
        <button id="addButton">Add</button>
    </div>
    
    <div id="daysContainer">
        <!-- Day sections will be generated by JavaScript -->
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Days of the week
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            let currentDay = new Date().toLocaleDateString('en-US', { weekday: 'long' });
            let shoppingItems = JSON.parse(localStorage.getItem('shoppingItems')) || {};
            
            // Initialize empty arrays for each day if they don't exist
            days.forEach(day => {
                if (!shoppingItems[day]) {
                    shoppingItems[day] = [];
                }
            });
            
            // Set the default day in the dropdown to today
            document.getElementById('daySelect').value = currentDay;
            
            // Create day sections
            const daysContainer = document.getElementById('daysContainer');
            days.forEach(day => {
                const daySection = document.createElement('div');
                daySection.className = 'day-section';
                daySection.innerHTML = `
                    <div class="day-header" data-day="${day}">
                        <span>${day}</span>
                        <span class="arrow">▼</span>
                    </div>
                    <div class="day-items">
                        <ul class="shopping-list" data-day="${day}">
                            ${shoppingItems[day].length === 0 ? 
                                '<div class="empty-state">No items for ' + day + '</div>' : 
                                ''}
                        </ul>
                    </div>
                `;
                daysContainer.appendChild(daySection);
                
                // Set today as expanded by default
                if (day === currentDay) {
                    const header = daySection.querySelector('.day-header');
                    const items = daySection.querySelector('.day-items');
                    header.classList.add('active');
                    items.classList.add('expanded');
                }
            });
            
            // Day header click handlers
            document.querySelectorAll('.day-header').forEach(header => {
                header.addEventListener('click', function() {
                    const items = this.nextElementSibling;
                    const wasExpanded = items.classList.contains('expanded');
                    
                    // Collapse all day items
                    document.querySelectorAll('.day-items').forEach(el => {
                        el.classList.remove('expanded');
                    });
                    document.querySelectorAll('.day-header').forEach(el => {
                        el.classList.remove('active');
                    });
                    
                    // Toggle the clicked day
                    if (!wasExpanded) {
                        this.classList.add('active');
                        items.classList.add('expanded');
                    }
                });
            });
            
            // Add item functionality
            document.getElementById('addButton').addEventListener('click', addItem);
            document.getElementById('itemInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addItem();
            });
            
            function addItem() {
                const input = document.getElementById('itemInput');
                const daySelect = document.getElementById('daySelect');
                const itemText = input.value.trim();
                const day = daySelect.value;
                
                if (itemText) {
                    shoppingItems[day].push({
                        text: itemText,
                        done: false
                    });
                    
                    saveItems();
                    input.value = '';
                    renderItems();
                    
                    // Expand the day we just added to if it's collapsed
                    const header = document.querySelector(`.day-header[data-day="${day}"]`);
                    const items = header.nextElementSibling;
                    if (!items.classList.contains('expanded')) {
                        // Collapse all first
                        document.querySelectorAll('.day-items').forEach(el => {
                            el.classList.remove('expanded');
                        });
                        document.querySelectorAll('.day-header').forEach(el => {
                            el.classList.remove('active');
                        });
                        // Expand our day
                        header.classList.add('active');
                        items.classList.add('expanded');
                    }
                }
            }
            
            function renderItems() {
                days.forEach(day => {
                    const list = document.querySelector(`.shopping-list[data-day="${day}"]`);
                    list.innerHTML = '';
                    
                    const items = shoppingItems[day];
                    
                    if (items.length === 0) {
                        list.innerHTML = '<div class="empty-state">No items for ' + day + '</div>';
                        return;
                    }
                    
                    items.forEach((item, index) => {
                        const li = document.createElement('li');
                        li.className = 'shopping-item';
                        if (item.done) li.classList.add('done');
                        
                        li.innerHTML = `
                            <span class="item-text">${item.text}</span>
                            <div class="actions">
                                <button class="done-btn" data-day="${day}" data-index="${index}">✓</button>
                                <button class="delete-btn" data-day="${day}" data-index="${index}">✕</button>
                            </div>
                        `;
                        
                        list.appendChild(li);
                    });
                });
                
                // Add event listeners to the new buttons
                document.querySelectorAll('.done-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const day = this.getAttribute('data-day');
                        const index = parseInt(this.getAttribute('data-index'));
                        shoppingItems[day][index].done = !shoppingItems[day][index].done;
                        saveItems();
                        renderItems();
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const day = this.getAttribute('data-day');
                        const index = parseInt(this.getAttribute('data-index'));
                        shoppingItems[day].splice(index, 1);
                        saveItems();
                        renderItems();
                    });
                });
            }
            
            function saveItems() {
                localStorage.setItem('shoppingItems', JSON.stringify(shoppingItems));
            }
            
            // Initial render
            renderItems();
        });
    </script>
</body>
</html>
